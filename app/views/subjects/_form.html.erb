<% stylesheets('edit_subject') %>
<% render 'subjects/id_bar' %>

<%= f.error_messages %>

<div class='do_not_contact field_wrapper'>
<%= f.label :do_not_contact, "Contact Status:" %>
<%= f.check_box :do_not_contact %>
<%= f.label :do_not_contact, "do not contact subject?" %>
</div><!-- class='do_not_contact' -->

<% @subject.build_pii if @subject.pii.nil? %>
<% f.fields_for :pii do |pii_fields| %>
	<%= pii_fields.hidden_field :id %>

	<%= pii_fields.label :name %><br />
	<%= pii_fields.text_field :first_name %>
	<%= pii_fields.text_field :middle_name %>
	<%= pii_fields.text_field :last_name %><br/>

	<%= pii_fields.label :fathers_name %><br />
	<%= pii_fields.text_field :father_first_name %>
	<%= pii_fields.text_field :father_middle_name %>
	<%= pii_fields.text_field :father_last_name %><br/>

	<%= pii_fields.label :mothers_name %><br />
	<%= pii_fields.text_field :mother_first_name %>
	<%= pii_fields.text_field :mother_middle_name %>
	<%= pii_fields.text_field :mother_last_name %><br/>

	<%= pii_fields.label :mothers_maiden_name %><br />
	<%= pii_fields.text_field :mother_maiden_name %><br/>

	<%= pii_fields.wrapped_text_field :state_id_no %>
	<%= pii_fields.wrapped_text_field :email %>

	<%= pii_fields.label :dob, "DOB" %>
	(<%= link_to 'Chronic', 
		'http://chronic.rubyforge.org',
		:target => 'new' %> parsed field)<br />
	<%= pii_fields.text_field :dob_string,
		:value => @subject.dob.try(:to_s,:dob) %><br/>

<% end %>

<%= f.wrapped_sex_select :sex, 
	:include_blank => true %>

<%= f.wrapped_collection_select :race_id, Race.all, 
	:id, :to_s, :include_blank => true,
	:label_text => 'Race' %>

<%= f.wrapped_collection_select :subject_type_id, SubjectType.all, 
	:id, :to_s, :include_blank => true,
	:label_text => "Subject Type" %>

<%= f.wrapped_collection_select :vital_status_id,
	VitalStatus.all, :id, :to_s, :include_blank => true %>

<% @subject.build_homex_outcome if @subject.homex_outcome.nil? %>
<% f.fields_for :homex_outcome do |hof| %>
	<%= hof.hidden_field :id %>

	<%= hof.wrapped_collection_select :interview_outcome_id,
		InterviewOutcome.all, :id, :to_s, :include_blank => true %>

	<%= hof.wrapped_text_field :interview_outcome_on_string,
		:label_text => "Interview Outcome On:" <<
			"(#{link_to('Chronic','http://chronic.rubyforge.org',
			:target => 'new')} parsed field)"  %>

	<%= hof.wrapped_collection_select :sample_outcome_id,
		SampleOutcome.all, :id, :to_s, :include_blank => true %>

	<%= hof.wrapped_text_field :sample_outcome_on_string,
		:label_text => "Sample Outcome On:" <<
			"(#{link_to('Chronic','http://chronic.rubyforge.org',
			:target => 'new')} parsed field)"  %>

<% end %>
