= Mods of Aegis

This rails plugin includes modifications to the Aegis gem.

== Assumptions

It is initially assumed that there is only ONE subclass of Aegis::Permissions and its name is Permissions (ie. ::Permissions).  I don't know why someone would have more, but I'm sure that there is a reason.  If you do, aegis_extension/action_controller.rb may need modified or removed to suit your needs as it uses ::Permissions.exists?

current_user method is also assumed to exist and is used in the action_controller method_missing.


== What modifications?

Fix for when Rails 2.3.4 throws 

 DEPRECATION WARNING: ActiveRecord::Errors.default_error_messages has been deprecated. 
 Please use I18n.translate('activerecord.errors.messages').. 
 (called from default_error_messages at /Library/Ruby/Gems/1.8/gems/activerecord-2.3.4
 /lib/active_record/validations.rb:131)

when validates_role_name is used in the User model.


Added ...

 Permissions.permission_names

which returns @permission_blocks.keys

Added ...

 Permissions.exists?(permission)

which returns the obvious boolean as to whether or not the permission has actually been defined and exists in the Permissions.permission_name array.


Added dynamically 'created' before_filters based on naming conventions by adding a method_missing method.  This is still in development and, due to some natural english usage, may never be perfect.  The purpose being that using a before_filter that matches /^may_(.+)_required$/ like ...

 before_filter :may_administrate_required
 before_filter :may_create_post_required
 before_filter :may_maintain_pages_required
 before_filter :may_view_users_required
 before_filter :may_view_user_required

... either passes or redirects, currently just to the root_path, based on the permission.  Those items that contain a singular target, like 'post' or 'user' expect that @post and @user be defined before this before_filter is executed if it affects the permission.  Those targets whose singular and plural forms are the same may not work yet.


== ToDo

Testing.

== Further Information

{Aegis Permissions on GitHub}[http://github.com/makandra/aegis]

